{"version":3,"file":"Diff.js","sourceRoot":"./@jupyterlab/git/src/","sources":["components/diff/Diff.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,uBAAuB,CAAC;AAEhD,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,OAAO,EAAE,MAAM,EAAE,MAAM,UAAU,CAAC;AAClC,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAEhD;;GAEG;AACH,MAAM,sBAAsB,GAA8C;IACxE,QAAQ,EAAE,MAAM;CACjB,CAAC;AAEF;;;;GAIG;AACH,MAAM,UAAU,eAAe,CAAC,IAAY;IAC1C,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,iBAAiB,EAAE,IAAI,sBAAsB,CAAC;AAC7E,CAAC;AAoBD;;;GAGG;AACH,MAAM,UAAU,IAAI,CAAC,KAAiB;IACpC,MAAM,aAAa,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,iBAAiB,EAAE,CAAC;IACtE,IAAI,aAAa,IAAI,sBAAsB,EAAE;QAC3C,MAAM,YAAY,GAAG,sBAAsB,CAAC,aAAa,CAAC,CAAC;QAC3D,OAAO,oBAAC,YAAY,oBAAK,KAAK,EAAI,CAAC;KACpC;SAAM;QACL,8BAA8B;QAC9B,IAAI;YACF,OAAO,oBAAC,aAAa,oBAAK,KAAK,EAAI,CAAC;SACrC;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,kCAAkC,KAAK,CAAC,IAAI,MAAM,KAAK,EAAE,CAAC,CAAC;YACvE,OAAO,IAAI,CAAC;SACb;KACF;AACH,CAAC;AAED,MAAM,iBAAiB,GAAG,KAAK,CAAC,aAAa,CAA6B,IAAI,CAAC,CAAC;AAChF,MAAM,CAAC,MAAM,kBAAkB,GAAG,iBAAiB,CAAC,QAAQ,CAAC;AAC7D,MAAM,CAAC,MAAM,kBAAkB,GAAG,iBAAiB,CAAC,QAAQ,CAAC","sourcesContent":["import { PathExt } from '@jupyterlab/coreutils';\nimport { IRenderMimeRegistry } from '@jupyterlab/rendermime';\nimport * as React from 'react';\nimport { IDiffContext } from './model';\nimport { NBDiff } from './NbDiff';\nimport { PlainTextDiff } from './PlainTextDiff';\n\n/**\n * A registry which maintains mappings of file extension to diff provider components.\n */\nconst DIFF_PROVIDER_REGISTRY: { [key: string]: typeof React.Component } = {\n  '.ipynb': NBDiff\n};\n\n/**\n * Determines if a given file is supported for diffs.\n *\n * @param path the file path\n */\nexport function isDiffSupported(path: string): boolean {\n  return PathExt.extname(path).toLocaleLowerCase() in DIFF_PROVIDER_REGISTRY;\n}\n\n/** Diff component properties */\nexport interface IDiffProps {\n  /**\n   * Path of the file to diff.\n   * It is relative to the git repository root folder\n   */\n  path: string;\n  /**\n   * Git respository folder path.\n   * It is relative to the server root.\n   */\n  topRepoPath: string;\n  /**\n   * References to show the diff for.\n   */\n  diffContext: IDiffContext;\n}\n\n/**\n * The parent diff component which maintains a registry of various diff providers.\n * Based on the extension of the file, it delegates to the relevant diff provider.\n */\nexport function Diff(props: IDiffProps) {\n  const fileExtension = PathExt.extname(props.path).toLocaleLowerCase();\n  if (fileExtension in DIFF_PROVIDER_REGISTRY) {\n    const DiffProvider = DIFF_PROVIDER_REGISTRY[fileExtension];\n    return <DiffProvider {...props} />;\n  } else {\n    // Fallback to plain text diff\n    try {\n      return <PlainTextDiff {...props} />;\n    } catch (error) {\n      console.log(`Unable to render diff view for ${props.path}:\\n${error}`);\n      return null;\n    }\n  }\n}\n\nconst renderMimeContext = React.createContext<IRenderMimeRegistry | null>(null);\nexport const RenderMimeProvider = renderMimeContext.Provider;\nexport const RenderMimeConsumer = renderMimeContext.Consumer;\n"]}