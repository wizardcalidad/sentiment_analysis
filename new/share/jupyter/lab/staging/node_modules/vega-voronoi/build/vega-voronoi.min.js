!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vega-dataflow"),require("vega-util"),require("d3-delaunay")):"function"==typeof define&&define.amd?define(["exports","vega-dataflow","vega-util","d3-delaunay"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).vega=e.vega||{},e.vega.transforms={}),e.vega,e.vega,e.d3)}(this,(function(e,t,n,a){"use strict";function o(e){t.Transform.call(this,null,e)}o.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const r=[-1e5,-1e5,1e5,1e5];function i(e){const t=e[0][0],n=e[0][1];let a=e.length-1;for(;e[a][0]===t&&e[a][1]===n;--a);return"M"+e.slice(0,a+1).join("L")+"Z"}n.inherits(o,t.Transform,{transform(e,t){const n=e.as||"path",o=t.source;if(!o||!o.length)return t;let l=e.size;l=l?[0,0,l[0],l[1]]:(l=e.extent)?[l[0][0],l[0][1],l[1][0],l[1][1]]:r;const f=this.value=a.Delaunay.from(o,e.x,e.y).voronoi(l);for(let e=0,t=o.length;e<t;++e){const t=f.cellPolygon(e);o[e][n]=t?i(t):null}return t.reflow(e.modified()).modifies(n)}}),e.voronoi=o,Object.defineProperty(e,"__esModule",{value:!0})}));